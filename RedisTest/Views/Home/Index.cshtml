@{
    ViewBag.Title = "Home Page";
}

<div class="jumbotron">
    <h1>Redis Test</h1>
    <p class="lead">Press the buttons to get data. First time the cache is empty.</p>
    <a class="btn btn-default" onclick="get(0)">Clear cache</a>
</div>

<div class="row">
    <div class="col-md-4">
        <a class="btn btn-default" onclick="get(1)">Get data 1</a>
        <span id="time1"></span>
        <p><span id="data1"></span></p>
    </div>
    <div class="col-md-4">
        <a class="btn btn-default" onclick="get(2)">Get data 2</a>
        <span id="time2"></span>
        <p><span id="data2"></span></p>
    </div>
    <div class="col-md-4">
        <a class="btn btn-default" onclick="get(3)">Get data 3</a>
        <span id="time3"></span>
        <p><span id="data3"></span></p>
    </div>
</div>

<script>
    var uri = 'api/data';

    function get(id) {
        var start = new Date().getTime();
        $.getJSON(uri + '/' + id)
            .done(function (data) {
                $('#data' + id).text(data);
            })
            .fail(function (jqXhr, textStatus, err) {
                $('#data' + id).text('Error: ' + err);
            })
            .always(function () {
                var end = new Date().getTime();
                var time = end - start;
                $('#time' + id).text('Time: ' + time);
            });
    }
</script>